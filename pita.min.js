var gulp=require("gulp"),uglify=require("gulp-uglify"),rename=require("gulp-rename"),sourcemaps=require("gulp-sourcemaps"),clean=require("gulp-clean"),fs=require("fs"),path=require("path"),pita=function(e){for(var r="@script.js".replace("@script",e),p="@script.min.js".replace("@script",e),l="./";!fs.existsSync(path.resolve(l,r));)l="../"+l;gulp.task("clean",function(){return console.log("cleaning previous script version ",path.resolve(l,p)),gulp.src(path.resolve(l,p)).pipe(clean({force:!0}))}),gulp.task("default",["clean"],function(){return console.log("flattening script ",path.resolve(l,r)),gulp.src(path.resolve(l,r)).pipe(uglify()).pipe(rename(path.resolve(l,p))).pipe(sourcemaps.write(l)).pipe(gulp.dest(l))})};module.exports=pita;