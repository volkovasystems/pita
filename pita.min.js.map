{"version":3,"sources":["pita.js"],"names":["gulp","require","uglify","rename","sourcemaps","del","vinylPaths","fs","path","pita","script","scriptPath","replace","minifiedScriptPath","pathSteps","existsSync","resolve","console","log","task","src","pipe","init","write","dest","module","exports"],"mappings":"AAAA,GAAIA,MAAOC,QAAS,QAChBC,OAASD,QAAS,eAClBE,OAASF,QAAS,eAClBG,WAAaH,QAAS,mBACtBI,IAAMJ,QAAS,OACfK,WAAaL,QAAS,eACtBM,GAAKN,QAAS,MACdO,KAAOP,QAAS,QAEhBQ,KAAO,SAAeC,GAKzB,IAJA,GAAIC,GAAa,aAAaC,QAAS,UAAWF,GAC9CG,EAAqB,iBAAiBD,QAAS,UAAWF,GAE1DI,EAAY,MACRP,GAAGQ,WAAYP,KAAKQ,QAASF,EAAWH,KAC/CG,EAAY,MAAQA,CAGrBG,SAAQC,IAAKJ,GAEbd,KAAKmB,KAAM,QAAS,WAEnB,MADAF,SAAQC,IAAK,oCAAqCV,KAAKQ,QAASF,EAAWD,IACpEb,KAAKoB,IAAKZ,KAAKQ,QAASF,EAAWD,IACxCQ,KAAMf,WAAYD,QAGrBL,KAAKmB,KAAM,WACR,SACF,WAEC,MADAF,SAAQC,IAAK,qBAAsBV,KAAKQ,QAASF,EAAWH,IACrDX,KAAKoB,IAAKZ,KAAKQ,QAASF,EAAWH,IACxCU,KAAMjB,WAAWkB,QACjBD,KAAMnB,UACNmB,KAAMlB,OAAQU,IACdQ,KAAMjB,WAAWmB,MAAOT,IACxBO,KAAMrB,KAAKwB,KAAMV,MAItBW,QAAOC,QAAUjB","file":"pita.min.js","sourcesContent":["var gulp = require( \"gulp\" );\nvar uglify = require( \"gulp-uglify\" );\nvar rename = require( \"gulp-rename\" );\nvar sourcemaps = require( \"gulp-sourcemaps\" );\nvar del = require( \"del\" );\nvar vinylPaths = require( \"vinyl-paths\" );\nvar fs = require( \"fs\" );\nvar path = require( \"path\" );\n\nvar pita = function pita( script ){\n\tvar scriptPath = \"@script.js\".replace( \"@script\", script );\n\tvar minifiedScriptPath = \"@script.min.js\".replace( \"@script\", script );\n\n\tvar pathSteps = \"./\";\n\twhile( !fs.existsSync( path.resolve( pathSteps, scriptPath ) ) ){\n\t\tpathSteps = \"../\" + pathSteps;\n\t}\n\n\tconsole.log( pathSteps );\n\n\tgulp.task( \"clean\", function cleanTask( ){\n\t\tconsole.log( \"cleaning previous script version \", path.resolve( pathSteps, minifiedScriptPath ) );\n\t\treturn gulp.src( path.resolve( pathSteps, minifiedScriptPath ) )\n\t\t\t.pipe( vinylPaths( del ) );\n\t} );\n\n\tgulp.task( \"default\",\n\t\t[ \"clean\" ],\n\t\tfunction defaultTask( ){\n\t\t\tconsole.log( \"flattening script \", path.resolve( pathSteps, scriptPath ) );\n\t\t\treturn gulp.src( path.resolve( pathSteps, scriptPath ) )\n\t\t\t\t.pipe( sourcemaps.init( ) )\n\t\t\t\t.pipe( uglify( ) )\n\t\t\t\t.pipe( rename( minifiedScriptPath ) )\n\t\t\t\t.pipe( sourcemaps.write( pathSteps ) )\n\t\t\t\t.pipe( gulp.dest( pathSteps ) );\n\t\t} );\n};\n\nmodule.exports = pita;\n"],"sourceRoot":"/source/"}